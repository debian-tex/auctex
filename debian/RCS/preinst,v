head	1.15;
access;
symbols
	9­8i-2:1.2
	auctex_9-8i-1:1.2;
locks; strict;
comment	@# @;


1.15
date	98.02.22.22.30.56;	author salve;	state Exp;
branches;
next	1.14;

1.14
date	98.02.19.17.58.46;	author salve;	state Exp;
branches;
next	1.13;

1.13
date	98.02.18.13.35.16;	author salve;	state Exp;
branches;
next	1.12;

1.12
date	98.02.18.13.33.33;	author salve;	state Exp;
branches;
next	1.11;

1.11
date	98.02.17.16.33.04;	author salve;	state Exp;
branches;
next	1.10;

1.10
date	98.01.20.01.26.00;	author salve;	state Exp;
branches;
next	1.9;

1.9
date	98.01.20.01.22.36;	author salve;	state Exp;
branches;
next	1.8;

1.8
date	98.01.20.01.18.14;	author salve;	state Exp;
branches;
next	1.7;

1.7
date	98.01.20.01.08.52;	author salve;	state Exp;
branches;
next	1.6;

1.6
date	98.01.20.01.03.47;	author salve;	state Exp;
branches;
next	1.5;

1.5
date	98.01.20.00.47.18;	author salve;	state Exp;
branches;
next	1.4;

1.4
date	98.01.20.00.25.39;	author salve;	state Exp;
branches;
next	1.3;

1.3
date	98.01.17.16.40.07;	author salve;	state Exp;
branches;
next	1.2;

1.2
date	98.01.08.13.57.54;	author salve;	state Exp;
branches;
next	1.1;

1.1
date	97.12.30.17.45.12;	author salve;	state Exp;
branches;
next	;


desc
@Original Helmut Geyer's version.
@


1.15
log
@To set fill-column in Local Variables is PLAIN WRONG.
@
text
@#!/bin/bash -e
#
# preinst configuration file for Debian auctex package.
# $Id: preinst,v 1.14 1998/02/19 17:58:46 salve Exp salve $
#
# Copyright © Davide G. M. Salvetti <salve@@debian.org>, 1997, 1998.
#
# This program is free software; you can redistribute it and/or modify it
# under the terms of the GNU General Public License as published by the
# Free Software Foundation; either version 2 of the License, or (at your
# option) any later version.
#
# This program is distributed in the hope that it will be useful, but
# WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
# General Public License for more details.
#
#
# You should have received a copy of the GNU General Public License along
# with this program; if not, write to: The Free Software Foundation, Inc.,
# 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.
#
# On Debian GNU/Linux System you can find a copy of the GNU General Public
# License in /usr/doc/copyright/GPL.

set -o posix

function remove_handmade_auctex () {
	echo "There is a locally installed version of AUC TeX in $1 which will conflict"
	cat <<-EOF
		with this Debian package.

		Shall I:
		    1) rename its tex-site file and go on installing;
		    2) stop installing this package.
	EOF
	answer=
	while [ "$answer" != "1" -a "$answer" != "2" ]; do
	    read -e -p "Please answer (1/2, 1 recommended): " answer
	done
	if [ "$answer" = "2" ] ; then
	    exit 1
	fi
	mv -V t -b $1/tex-site.el $1/tex-site.el.dpkg-old
}

case "$1" in
    install|upgrade)
	:;
	# continue below
    ;;
    abort-upgrade)
	exit 0
    ;;
    *)
	echo "preinst called with unknow argument \`$1'" >&2
	exit 0
    ;;
esac

# Remove hand-made auctex packages from /usr/local, if existant.
if [ -f /usr/local/lib/xemacs/site-lisp/tex-site.el ]; then
    remove_handmade_auctex /usr/local/lib/xemacs/site-lisp/
fi
if [ -f /usr/local/share/emacs/site-lisp/tex-site.el ]; then
    remove_handmade_auctex /usr/local/share/emacs/site-lisp/
fi

# tex-site.el is no more a conffile: warn the user about it, if appropriate.
if [ -e /etc/elisp/tex-site.el ]; then
	cat <<-EOF
		There is a new method to start AUC TeX on a per user or per site basis: you
		should read /usr/doc/auctex/README.Debian.gz to learn about it.

		As a consequence of this new method, the old conffile /etc/elisp/tex-site.el
		is no more needed and will be removed if you proceed installing this package.

		This shouldn't be of any problem, unless you made some changes and wish to
		preserve them.  If this is the case, you should save your changes before
		going any further or stop installing this package.

		Shall I:
		    1) remove /etc/elisp/tex-site.el and go on installing;
		    2) stop installing this package.
	EOF
	answer=
	while [ "$answer" != "1" -a "$answer" != "2" ]; do
	    read -e -p "Please answer (1/2, 1 recommended): " answer
	done
	if [ "$answer" = "2" ] ; then
	    exit 1
	fi
	rm -f /etc/emacs/site-start.d/50tex-site.el
	rm -f /etc/elisp/tex-site.el
	find /etc -name elisp -type d -empty | xargs rmdir
fi

# Remove old auctex package relics as there is a new location for auctex.
if [ -d /usr/lib/emacs/common/auctex ]; then
	# Warn the user about what we are trying to do.
	cat <<-EOF
		The AUC TeX elisp files have been moved in:
		    /usr/share/emacs/site-lisp/auctex/
		The obsolete /usr/lib/emacs/common/auctex/ directory is about to be removed.

		This shouldn't be of any problem, unless you made some changes and wish to
		preserve them.  If this is the case, you should save your changes before
		going any further or stop installing this package.

		Shall I:
		    1) remove /usr/lib/emacs/common/auctex/ and go on installing;
		    2) stop installing this package.
	EOF
	answer=
	while [ "$answer" != "1" -a "$answer" != "2" ]; do
	    read -e -p "Please answer (1/2, 1 recommended): " answer
	done
	if [ "$answer" = "2" ] ; then
	    exit 1
	fi
	rm -rf /usr/lib/emacs/common/auctex
fi

exit 0

### Local Variables:
### mode: shell-script
### End:
@


1.14
log
@Updated GPL blurb.
@
text
@d4 1
a4 1
# $Id: preinst,v 1.13 1998/02/18 13:35:16 salve Exp salve $
d8 4
a11 2
# This program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as
# published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.
d13 12
a24 7
# This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
# without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
# See the GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License along with this program; if not, write to:
#	The Free Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.
# On Debian GNU/Linux System you can find a copy of the GNU General Public License in /usr/doc/copyright/GPL.
a127 1
### fill-column: 132
@


1.13
log
@*** empty log message ***
@
text
@d4 1
a4 1
# $Id: preinst,v 1.12 1998/02/18 13:33:33 salve Exp salve $
d15 3
a17 3
# You should have received a copy of the GNU General Public License along with this program; if not, write to the Free Software
# Foundation, Inc., 675 Mass Ave., Cambridge, MA 02139, USA.  On Debian GNU/Linux System you can find a copy of the GNU General
# Public License in /usr/doc/copyright/GPL.
@


1.12
log
@Added GPL blurb.
@
text
@d4 1
a4 1
# $Id: preinst,v 1.11 1998/02/17 16:33:04 salve Exp salve $
d42 1
a43 1
	:
@


1.11
log
@Untested.
@
text
@d4 1
a4 1
# 	$Id: preinst,v 1.10 1998/01/20 01:26:00 salve Exp salve $	
d6 12
a17 2
# Written by Helmut Geyer <Helmut.Geyer@@iwr.uni-heidelberg.de>.
# Modified by Davide G. M. Salvetti <salve@@debian.org> on Tue, 30 Dec 1997 11:07:00 CET.
d116 2
@


1.10
log
@*** empty log message ***
@
text
@d4 1
a4 1
# 	$Id: preinst,v 1.9 1998/01/20 01:22:36 salve Exp salve $	
d12 16
a27 16
    echo "There is a locally installed version of AUC TeX in $1 which will conflict"
    cat <<EOF
with this Debian package.

Shall I:
    1) rename its tex-site file and go on installing;
    2) stop installing this package.
EOF
    answer=
    while [ "$answer" != "1" -a "$answer" != "2" ]; do
	read -e -p "Please answer (1/2, 1 recommended): " answer
    done
    if [ "$answer" = "2" ] ; then
	exit 1
    fi
    mv -V t -b $1/tex-site.el $1/tex-site.el.dpkg-old
d30 14
d54 25
a78 25
    cat <<EOF
There is a new method to start AUC TeX on a per user or per site basis: you
should read /usr/doc/auctex/README.Debian.gz to learn about it.

As a consequence of this new method, the old conffile /etc/elisp/tex-site.el
is no more needed and will be removed if you proceed installing this package.

This shouldn't be of any problem, unless you made some changes and wish to
preserve them.  If this is the case, you should save your changes before
going any further or stop installing this package.

Shall I:
    1) remove /etc/elisp/tex-site.el and go on installing;
    2) stop installing this package.
EOF
    answer=
    while [ "$answer" != "1" -a "$answer" != "2" ]; do
	read -e -p "Please answer (1/2, 1 recommended): " answer
    done
    if [ "$answer" = "2" ] ; then
	exit 1
    fi
    rm -f /etc/emacs/site-start.d/50tex-site.el
    rm -f /etc/elisp/tex-site.el
    find /etc -name elisp -type d -empty | xargs rmdir
d83 22
a104 22
    # Warn the user about what we are trying to do.
    cat <<EOF
The AUC TeX elisp files have been moved back in:
    /usr/lib/emacs/site-lisp/auctex/
The obsolete /usr/lib/emacs/common/auctex/ directory is about to be removed.

This shouldn't be of any problem, unless you made some changes and wish to
preserve them.  If this is the case, you should save your changes before
going any further or stop installing this package.

Shall I:
    1) remove /usr/lib/emacs/common/auctex/ and go on installing;
    2) stop installing this package.
EOF
    answer=
    while [ "$answer" != "1" -a "$answer" != "2" ]; do
	read -e -p "Please answer (1/2, 1 recommended): " answer
    done
    if [ "$answer" = "2" ] ; then
	exit 1
    fi
    rm -rf /usr/lib/emacs/common/auctex
@


1.9
log
@*** empty log message ***
@
text
@d4 1
a4 1
# 	$Id: preinst,v 1.8 1998/01/20 01:18:14 salve Exp salve $	
d52 1
a52 1
    1) remove /usr/lib/emacs/site-lisp/auctex and go on installing;
@


1.8
log
@Added rm 50tex-site.el.
@
text
@d4 1
a4 1
# 	$Id: preinst,v 1.7 1998/01/20 01:08:52 salve Exp salve $	
d20 2
a21 1
    unset answer && while [ "$answer" != "1" -a "$answer" != "2" ]; do
d55 2
a56 1
    unset answer && while [ "$answer" != "1" -a "$answer" != "2" ]; do
d83 2
a84 1
    unset answer && while [ "$answer" != "1" -a "$answer" != "2" ]; do
@


1.7
log
@Added rm /etc/elisp/tex-site.el.
@
text
@d4 1
a4 1
# 	$Id: preinst,v 1.6 1998/01/20 01:03:47 salve Exp salve $	
d60 1
@


1.6
log
@Added unset answer.
@
text
@d4 1
a4 1
# 	$Id: preinst,v 1.5 1998/01/20 00:47:18 salve Exp salve $	
d60 2
@


1.5
log
@Reworded tex-site.el no more conffile warning.
@
text
@d4 1
a4 1
# 	$Id: preinst,v 1.4 1998/01/20 00:25:39 salve Exp salve $	
d20 1
a20 1
    while [ "$answer" != "1" -a "$answer" != "2" ]; do
d54 1
a54 1
    while [ "$answer" != "1" -a "$answer" != "2" ]; do
d78 1
a78 1
    while [ "$answer" != "1" -a "$answer" != "2" ]; do
@


1.4
log
@Added warning about /etc/elisp/tex-site.el removing.
Prompt to the user rewritten.
@
text
@d4 1
a4 1
# 	$Id: preinst,v 1.3 1998/01/17 16:40:07 salve Exp salve $	
d29 8
d40 5
a44 2
The old conffile /etc/elisp/tex-site.el will be removed if you proceed
installing this package, in favor of /usr/lib/emacs/site-lisp/tex-site.el.
d48 1
a48 3
going any further (you may put relevant elisp forms in the startup directory
/etc/emacs/site-start.d/, see /usr/doc/emacs/README.site-start.d for more
info) or stop installing this package.
a84 8
fi

# Remove hand-made auctex packages from /usr/local, if existant.
if [ -f /usr/local/lib/xemacs/site-lisp/tex-site.el ]; then
    remove_handmade_auctex /usr/local/lib/xemacs/site-lisp/
fi
if [ -f /usr/local/share/emacs/site-lisp/tex-site.el ]; then
    remove_handmade_auctex /usr/local/share/emacs/site-lisp/
@


1.3
log
@*** empty log message ***
@
text
@d4 1
a4 1
# 	$Id: preinst,v 1.2 1998/01/08 13:57:54 salve Exp salve $	
d11 2
a12 2
remove_handmade_auctex () {
    echo "There is a locally installed version of AucTeX in $1 which will conflict"
d14 3
a16 1
with the Debian package. Shall I
d18 1
a18 2
or
    2) stop installing this package;
d20 3
a22 2
    echo -n "Please answer (1/2): "
    read answer
a24 11
    elif [ "$answer" != "1" ]; then
	fertig=
	until [ ! -z "$fertig" ]; do
	    echo -n " Please answer 1 or 2! "
	    read answer
	    if [ "$answer" = "2" ] ; then
		exit 1
	    elif [ "$answer" = "1" ]; then
		fertig=1
	    fi
	done
d29 2
a30 3
# remove old auctex package relics as there is a new location for auctex
if [ -d /usr/lib/emacs/site-lisp/auctex ]; then
    # warn the user about what we are trying to do
d32 2
a33 1
The obsolete /usr/lib/emacs/site-lisp/auctex is about to be removed.
d35 1
a35 1
This shouldn't be any problem, unless you made some changes and wish to
d37 5
a41 1
going any further or stop installing this package.  Shall I
d43 25
a67 2
or
    2) stop installing this package;
d69 3
a71 2
    echo -n "Please answer (1/2, 1 recommended): "
    read answer
a73 11
    elif [ "$answer" != "1" ]; then
	fertig=
	until [ ! -z "$fertig" ]; do
	    echo -n " Please answer 1 or 2! "
	    read answer
	    if [ "$answer" = "2" ] ; then
		exit 1
	    elif [ "$answer" = "1" ]; then
		fertig=1
	    fi
	done
d75 1
a75 1
    rm -rf /usr/lib/emacs/site-lisp/auctex
d78 1
a78 1
# remove hand-made auctex packages from /usr/local, if existant.
@


1.2
log
@New maintainer.
@
text
@d4 1
a4 1
# 	$Id$	
d6 1
a6 1
# Written by Helmut Geyer <Helmut.Geyer@@iwr.uni-heidelberg.de>
@


1.1
log
@Initial revision
@
text
@d1 9
a9 2
#!/bin/sh
set -e
d12 17
a28 7
	echo -n "There is a locally installed version of auctex in $1 which will
conflict with the debian package. Shall I
     1) rename its tex-site file and go on installing         or
     2) stop installing this package?
Please answer: "
	read answer
	if [ "$answer" = "2" ] ; then
d30 6
a35 13
	elif [ "$answer" != "1" ]; then
		fertig=
		until [ ! -z "$fertig" ]; do
			echo -n " Please answer 1 or 2! "
			read answer
			if [ "$answer" = "2" ] ; then
	                	exit 1
			elif [ "$answer" = "1" ]; then
				fertig=1
			fi
		done
	fi
	mv -V t -b $1/tex-site.el $1/tex-site.el.dpkg-old
d40 28
a67 1
	rm -rf /usr/lib/emacs/site-lisp/auctex
d72 1
a72 1
	remove_handmade_auctex /usr/local/lib/xemacs/site-lisp/
d75 1
a75 1
	remove_handmade_auctex /usr/local/share/emacs/site-lisp/
d77 5
@
