#include "variables"
#!/bin/bash -e
#
# elisp remove file for Debian <:=${PACKAGE}:> package.
# $Id: remove.in,v 1.17 2004/09/09 15:15:51 salve Exp $
#
<:=@COPYRIGHT:>//

set -o posix

FLAVOR=${1}

undo_install () {
    echo >&2 -n "remove/<:=${PACKAGE}:>: Removing for ${FLAVOR}... "
    rm -f <:=if($_="${sstartd}/${EPRIORITY}${PACKAGE}.el")
	    =~s|emacs|\${FLAVOR}|:>
    rm -f <:=if($_=${lisp})=~s|emacs|\${FLAVOR}|:>/../tex-site.el
    rm -f <:=if($_=${lisp})=~s|emacs|\${FLAVOR}|:>/<:=${ELCLOG}:>{,.gz}
    rm -f <:=if($_=${lisp})=~s|emacs|\${FLAVOR}|:>/*.elc
    rm -f <:=if($_=${style})=~s|emacs|\${FLAVOR}|:>/*.elc
    rm -f <:=if($_=${style})=~s|emacs|\${FLAVOR}|:>/.nosearch
    test -d <:=if($_=${style})=~s|emacs|\${FLAVOR}|:> && \
	rmdir --ignore-fail-on-non-empty \
	<:=if($_=${style})=~s|emacs|\${FLAVOR}|:>
    test -d <:=if($_=${lisp})=~s|emacs|\${FLAVOR}|:> && \
	rmdir --ignore-fail-on-non-empty \
	<:=if($_=${lisp})=~s|emacs|\${FLAVOR}|:>
    echo >&2 "done."
    return 0
}

undo_auto () {
    rm -rf <:="${var}/\${FLAVOR}/":>
    return 0
}

case "${FLAVOR}" in
    (emacs) : ;;
    (emacs21|emacs-snapshot)
    <:# remove all parsed information files:>//
    undo_auto
    <:# deinstall:>//
    undo_install ;;
    (*) echo >&2 "remove/<:=${PACKAGE}:>: Ignoring emacsen flavor ${FLAVOR}." ;;
esac

exit 0
<:
# Local Variables:
# mode: shell-script
# End:
:>//
